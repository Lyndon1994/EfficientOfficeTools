(function(){"use strict";var e={6053:function(e,t,l){var o=l(3751),n=l(7975),s=(l(4188),l(641)),a=l(33);const i={class:"info-section",style:{"margin-bottom":"24px"}},r=["innerHTML"],p={style:{"margin-top":"16px"}},m={href:"https://github.com/Lyndon1994/EfficientOfficeTools/blob/main/chrome/SearchTool/README.md",target:"_blank"},g={style:{"margin-top":"16px"}},d={style:{"margin-top":"12px",color:"#888","font-size":"13px"}},u={style:{"margin-top":"12px"}},c={href:"https://github.com/Lyndon1994/EfficientOfficeTools/blob/main/chrome/SearchTool/README.md",target:"_blank"},h=["src"],f={style:{"margin-left":"8px"}},b={style:{"margin-left":"8px"}},y={style:{color:"#888","font-size":"12px","margin-top":"4px"}};function k(e,t,l,o,n,k){const M=(0,s.g2)("el-card"),C=(0,s.g2)("Rank"),F=(0,s.g2)("el-icon"),_=(0,s.g2)("el-col"),v=(0,s.g2)("el-input"),S=(0,s.g2)("el-switch"),w=(0,s.g2)("el-tooltip"),x=(0,s.g2)("el-row"),V=(0,s.g2)("Delete"),T=(0,s.g2)("el-button"),P=(0,s.g2)("Plus"),E=(0,s.g2)("el-form-item"),L=(0,s.g2)("draggable"),U=(0,s.g2)("el-option"),O=(0,s.g2)("el-select"),D=(0,s.g2)("el-input-number"),I=(0,s.g2)("el-color-picker"),N=(0,s.g2)("el-divider"),A=(0,s.g2)("el-upload"),H=(0,s.g2)("el-form");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",i,[(0,s.bF)(M,{shadow:"never"},{header:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,a.v_)(e.getMessage("readmeTitle")||"Read Me"),1)])),default:(0,s.k6)((()=>[(0,s.Lk)("div",{innerHTML:e.getMessage("readme")},null,8,r),(0,s.Lk)("div",p,[(0,s.Lk)("strong",null,(0,a.v_)(e.getMessage("welcomeContributeTitle")||"Welcome to contribute:"),1),(0,s.Lk)("span",null,[(0,s.eW)((0,a.v_)(e.getMessage("welcomeContribute"))+" ",1),(0,s.Lk)("a",m,(0,a.v_)(e.getMessage("welcomeContributeLink")||"Click here."),1),t[16]||(t[16]=(0,s.eW)(" 😊 "))])]),(0,s.Lk)("div",g,[(0,s.Lk)("strong",null,(0,a.v_)(e.getMessage("llmConfigDocTitle")||"LLM 配置说明："),1),(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,(0,a.v_)(e.getMessage("llmConfigPrompt")||"Prompt: 用户输入的提示词模板，支持 {content} 占位符。"),1),(0,s.Lk)("li",null,(0,a.v_)(e.getMessage("llmConfigSystemPrompt")||"System Prompt: 系统级提示词，影响模型行为。"),1),(0,s.Lk)("li",null,(0,a.v_)(e.getMessage("llmConfigMenus")||"菜单可自定义多组 prompt，方便快速切换。"),1)]),(0,s.Lk)("div",d,(0,a.v_)(e.getMessage("llmModelsJsonTip")||"请在下方填写模型配置（JSON），支持多模型切换。每个模型需包含 active, endpoint, method, headers, bodyParams, responseParser 字段。"),1),(0,s.Lk)("div",u,[(0,s.Lk)("a",c,[(0,s.Lk)("strong",null,(0,a.v_)(e.getMessage("llmModelsJsonExampleTitle")||"模型配置示例："),1)]),t[17]||(t[17]=(0,s.Lk)("pre",{style:{background:"#f8f8f8","border-radius":"4px",padding:"8px",overflow:"auto","font-size":"12px"}},(0,a.v_)('{\n  "openai": {\n    "active": false, // is this model enabled?\n    "endpoint": "https://api.openai.com/v1/chat/completions",\n    "method": "POST",\n    "headers": {\n      "Authorization": "Bearer {YOUR-API-KEY}", // Replace with your OpenAI API key\n      "Content-Type": "application/json"\n    },\n    "bodyParams": {\n      "model": "gpt-3.5-turbo",\n      "messages": "{MESSAGES}", // Fixed value\n      "temperature": 0.7\n    },\n    "responseParser": "response.choices[0].message.content" // Must start with response.\n  },\n  "azureopenai": {\n    "active": true, // is this model enabled? Only one model can be enabled at a time.\n    "endpoint": "https://your-azure-endpoint.openai.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-02-15-preview",\n    "method": "POST",\n    "headers": {\n      "api-key": "{YOUR-API-KEY}",  // Replace with your Azure OpenAI API key\n      "Content-Type": "application/json"\n    },\n    "bodyParams": {\n      "model": "gpt-4.1-mini",\n      "messages": "{MESSAGES}",  // Fixed value\n      "temperature": 0.7\n    },\n    "responseParser": "response.choices[0].message.content"\n  }\n}')+"\n          ",-1))])])])),_:1})]),(0,s.bF)(H,{ref:"form","label-width":"120px",size:"mini",style:{width:"100%","min-width":"1000px","min-height":"500px"}},{default:(0,s.k6)((()=>[(0,s.bF)(M,{shadow:"never",style:{"margin-bottom":"24px"}},{header:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,a.v_)(e.getMessage("searchEngine")||"搜索引擎配置"),1)])),default:(0,s.k6)((()=>[(0,s.bF)(L,{list:e.engines,"onUpdate:list":t[0]||(t[0]=t=>e.engines=t),onEnd:e.onDragEnd,handle:".handle","item-key":"id",class:"list-group"},{item:(0,s.k6)((({element:t})=>[((0,s.uX)(),(0,s.Wv)(E,{label:"",key:t.id,gutter:12,class:"engine-form-item"},{default:(0,s.k6)((()=>[(0,s.bF)(x,{gutter:10,class:"engine-row"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{xs:2,sm:1},{default:(0,s.k6)((()=>[(0,s.bF)(F,{class:"handle"},{default:(0,s.k6)((()=>[(0,s.bF)(C)])),_:1})])),_:1}),(0,s.bF)(_,{xs:12,sm:6,md:3},{default:(0,s.k6)((()=>[(0,s.bF)(v,{placeholder:e.getMessage("searchEngine"),modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,class:"engine-input"},null,8,["placeholder","modelValue","onUpdate:modelValue"])])),_:2},1024),(0,s.bF)(_,{xs:12,sm:6,md:4},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("optionsInPopupTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:t.inPopup,"onUpdate:modelValue":e=>t.inPopup=e,"active-text":e.getMessage("optionsInPopup")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024),(0,s.bF)(_,{xs:12,sm:6,md:4},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("inRightTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:t.inRight,"onUpdate:modelValue":e=>t.inRight=e,"active-text":e.getMessage("inRight")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024),(0,s.bF)(_,{xs:12,sm:6,md:4},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("inShortcutsTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:t.inShortcuts,"onUpdate:modelValue":e=>t.inShortcuts=e,"active-text":e.getMessage("inShortcuts")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024),(0,s.bF)(_,{xs:12,sm:6,md:4},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("inTooltipTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:t.inTooltip,"onUpdate:modelValue":e=>t.inTooltip=e,"active-text":e.getMessage("inTooltip")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024)])),_:2},1024),(0,s.bF)(x,{gutter:16,class:"engine-row"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{xs:24,sm:12,md:14},{default:(0,s.k6)((()=>[(0,s.bF)(v,{placeholder:e.getMessage("searchUrl"),modelValue:t.url,"onUpdate:modelValue":e=>t.url=e,onInput:l=>e.changeSearchUrl(t),class:"engine-url"},null,8,["placeholder","modelValue","onUpdate:modelValue","onInput"])])),_:2},1024),(0,s.bF)(_,{xs:24,sm:8,md:8},{default:(0,s.k6)((()=>[(0,s.bF)(v,{placeholder:e.getMessage("searchIcon"),modelValue:t.icon,"onUpdate:modelValue":e=>t.icon=e,class:"engine-icon"},{append:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.icon,alt:"",height:"20px"},null,8,h)])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue"])])),_:2},1024),(0,s.bF)(_,{xs:6,sm:2,md:2,style:{"min-width":"40px"}},{default:(0,s.k6)((()=>[(0,s.bF)(T,{type:"danger",onClick:l=>e.delItem(t.id),circle:"",style:{"margin-left":"4px"}},{default:(0,s.k6)((()=>[(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(V)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),t.id==e.engines.length?((0,s.uX)(),(0,s.Wv)(_,{key:0,xs:6,sm:2,md:2,style:{"min-width":"40px"}},{default:(0,s.k6)((()=>[(0,s.bF)(T,{type:"info",onClick:e.addItem,circle:"",style:{"margin-left":"4px"}},{default:(0,s.k6)((()=>[(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(P)])),_:1})])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024))])),_:1},8,["list","onEnd"])])),_:1}),(0,s.bF)(M,{shadow:"never",style:{"margin-bottom":"24px"}},{header:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,a.v_)(e.getMessage("generalSettings")||"常规设置"),1)])),default:(0,s.k6)((()=>[(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("select2clipboardTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:e.settings.select2clipboard,"onUpdate:modelValue":t[1]||(t[1]=t=>e.settings.select2clipboard=t),"active-text":e.getMessage("select2clipboard")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("showTooltipTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:e.settings.showTooltip,"onUpdate:modelValue":t[2]||(t[2]=t=>e.settings.showTooltip=t),"active-text":e.getMessage("showTooltip")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("showTopSearchSwitchTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:e.settings.showTopSearchSwitch,"onUpdate:modelValue":t[3]||(t[3]=t=>e.settings.showTopSearchSwitch=t),"active-text":e.getMessage("showTopSearchSwitch")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("searchInNewTabTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:e.settings.searchInNewTab,"onUpdate:modelValue":t[4]||(t[4]=t=>e.settings.searchInNewTab=t),"active-text":e.getMessage("searchInNewTab")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("popupSuggestEnabledTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:e.settings.popupSuggestEnabled,"onUpdate:modelValue":t[5]||(t[5]=t=>e.settings.popupSuggestEnabled=t),"active-text":e.getMessage("popupSuggestEnabled")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("popupSuggestEngineTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(O,{modelValue:e.settings.popupSuggestEngine,"onUpdate:modelValue":t[6]||(t[6]=t=>e.settings.popupSuggestEngine=t),style:{width:"120px"}},{default:(0,s.k6)((()=>[(0,s.bF)(U,{label:"Bing",value:"bing"}),(0,s.bF)(U,{label:"Google",value:"google"})])),_:1},8,["modelValue"]),(0,s.Lk)("span",f,(0,a.v_)(e.getMessage("popupSuggestEngine")),1)])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("popupHistoryEnabledTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:e.settings.popupHistoryEnabled,"onUpdate:modelValue":t[7]||(t[7]=t=>e.settings.popupHistoryEnabled=t),"active-text":e.getMessage("popupHistoryEnabled")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("popupHistoryDaysTip"),placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(D,{modelValue:e.settings.popupHistoryDays,"onUpdate:modelValue":t[8]||(t[8]=t=>e.settings.popupHistoryDays=t),min:1,max:365,step:1,style:{width:"120px"}},null,8,["modelValue"]),(0,s.Lk)("span",b,(0,a.v_)(e.getMessage("popupHistoryDays")),1)])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.getMessage("themeColorTip"))+": ",1),(0,s.bF)(I,{modelValue:e.settings.themeColor,"onUpdate:modelValue":t[9]||(t[9]=t=>e.settings.themeColor=t),"show-alpha":"",predefine:e.predefineColors},null,8,["modelValue","predefine"])])),_:1}),(0,s.bF)(E,{label:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.getMessage("textColorTip"))+": ",1),(0,s.bF)(I,{modelValue:e.settings.textColor,"onUpdate:modelValue":t[10]||(t[10]=t=>e.settings.textColor=t),"show-alpha":"",predefine:e.predefineColors},null,8,["modelValue","predefine"])])),_:1})])),_:1}),(0,s.bF)(M,{shadow:"never",style:{"margin-bottom":"24px"}},{header:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,a.v_)(e.getMessage("llmSettings")||"大模型（LLM）配置"),1)])),default:(0,s.k6)((()=>[(0,s.bF)(E,{label:e.getMessage("llmModelsJsonLabel")||"Models JSON"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:e.llmConfig.llmModels,"onUpdate:modelValue":t[11]||(t[11]=t=>e.llmConfig.llmModels=t),type:"textarea",rows:8,placeholder:e.getMessage("llmModelsJsonPlaceholder"),style:{width:"100%","max-width":"800px"}},null,8,["modelValue","placeholder"]),(0,s.Lk)("div",y,(0,a.v_)(e.getMessage("llmModelsJsonTip")||"Please enter a JSON object. Each key is a model name, and the value is an object with fields: active, endpoint, method, headers, bodyParams, responseParser."),1)])),_:1},8,["label"]),(0,s.bF)(N),(0,s.bF)(E,null,{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"item",effect:"dark",content:e.getMessage("enableSummarizeTip")||"是否启用总结全文",placement:"top"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{modelValue:e.llmConfig.enableSummarize,"onUpdate:modelValue":t[12]||(t[12]=t=>e.llmConfig.enableSummarize=t),"active-text":e.getMessage("enableSummarize")||"启用总结全文"},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,s.bF)(E,{label:e.getMessage("llmPromptLabel")||"Prompt"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:e.llmConfig.prompt,"onUpdate:modelValue":t[13]||(t[13]=t=>e.llmConfig.prompt=t),placeholder:e.getMessage("llmPrompt"),type:"textarea",rows:2,style:{width:"600px"}},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,s.bF)(E,{label:e.getMessage("llmSystemPromptLabel")||"System Prompt"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:e.llmConfig.systemPrompt,"onUpdate:modelValue":t[14]||(t[14]=t=>e.llmConfig.systemPrompt=t),placeholder:e.getMessage("llmSystemPrompt"),type:"textarea",rows:2,style:{width:"600px"}},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,s.bF)(N),(0,s.bF)(E,{label:e.getMessage("llmAskLlmLabel")||"Ask LLM"},{default:(0,s.k6)((()=>[(0,s.bF)(L,{list:e.llmChatMenus,"onUpdate:list":t[15]||(t[15]=t=>e.llmChatMenus=t),handle:".llm-menu-handle","item-key":"id",class:"list-group"},{item:(0,s.k6)((({element:t})=>[(0,s.bF)(x,{gutter:8,align:"middle",style:{"margin-bottom":"8px"}},{default:(0,s.k6)((()=>[(0,s.bF)(_,{span:1},{default:(0,s.k6)((()=>[(0,s.bF)(F,{class:"llm-menu-handle",style:{cursor:"move"}},{default:(0,s.k6)((()=>[(0,s.bF)(C)])),_:1})])),_:1}),(0,s.bF)(_,{span:4},{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,placeholder:e.getMessage("llmChatMenuName")||"Name"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,s.bF)(_,{span:6},{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:t.prompt,"onUpdate:modelValue":e=>t.prompt=e,placeholder:e.getMessage("llmChatMenuPrompt")||"Prompt, use {content}"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,s.bF)(_,{span:8},{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:t.systemPrompt,"onUpdate:modelValue":e=>t.systemPrompt=e,placeholder:e.getMessage("llmChatMenuSystemPrompt")||"System Prompt"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,s.bF)(_,{span:2},{default:(0,s.k6)((()=>[(0,s.bF)(T,{type:"danger",onClick:l=>e.delChatMenu(t.id),circle:"",style:{"margin-left":"4px"}},{default:(0,s.k6)((()=>[(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(V)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1},8,["list"]),(0,s.bF)(T,{type:"info",onClick:e.addChatMenu,circle:"",style:{"margin-left":"4px"}},{default:(0,s.k6)((()=>[(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(P)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(E,null,{default:(0,s.k6)((()=>[(0,s.bF)(T,{type:"danger",onClick:e.reset},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.getMessage("reset")),1)])),_:1},8,["onClick"]),(0,s.bF)(T,{type:"default",onClick:e.exportConfig},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.getMessage("export")||"导出"),1)])),_:1},8,["onClick"]),(0,s.bF)(A,{"show-file-list":!1,accept:".json","before-upload":e.importConfig},{default:(0,s.k6)((()=>[(0,s.bF)(T,{type:"default"},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.getMessage("import")||"导入"),1)])),_:1})])),_:1},8,["before-upload"])])),_:1})])),_:1},512)],64)}l(4114),l(8111),l(2489),l(7588),l(1701);var M=l(432),C=l.n(M),F=l(8548),_=l(181),v=(0,s.pM)({name:"App",components:{draggable:C(),Delete:F.epd,Plus:F.FWt,Rank:F.rgM},data(){return{openHiTip:!1,logmsg:"",engines:[],settings:{select2clipboard:!1,showTooltip:!1,showTopSearchSwitch:!0,searchInNewTab:!0,themeColor:"rgba(144, 238, 144, 0.56)",textColor:"#202124",popupSuggestEnabled:!0,popupSuggestEngine:"bing",popupHistoryEnabled:!0,popupHistoryDays:90},llmConfig:{enableSummarize:!1,llmModels:"[]",prompt:"",systemPrompt:""},llmChatMenus:[],predefineColors:["#FFFFFF","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"]}},methods:{init(){let e={engines:this.getMessage("defaultEnginesConfig"),select2clipboard:!1,showTooltip:!1,showTopSearchSwitch:!0,searchInNewTab:!0,themeColor:"rgba(144, 238, 144, 0.56)",textColor:"#202124",popupSuggestEnabled:!0,popupSuggestEngine:"bing",popupHistoryEnabled:!0,popupHistoryDays:90,llmEnableSummarize:!1,llmModels:"[]",llmPrompt:this.getMessage("llmPrompt"),llmSystemPrompt:this.getMessage("llmSystemPrompt"),llmChatMenus:[]},t=this;console.log("[options] init defaultConfig:",e),chrome.storage.sync.get(e,(function(e){console.log("[options] chrome.storage.sync.get result:",e);let l=JSON.parse(e.engines);return chrome.storage.local.get(null,(function(o){l.forEach((e=>{o&&o["iconData_"+e.name]&&(e.iconData=o["iconData_"+e.name])})),t.engines=l,t.settings.select2clipboard=e.select2clipboard,t.settings.showTooltip=e.showTooltip,t.settings.showTopSearchSwitch=e.showTopSearchSwitch,t.settings.searchInNewTab=e.searchInNewTab,t.settings.themeColor=e.themeColor,t.settings.textColor=e.textColor,t.settings.popupSuggestEnabled=e.popupSuggestEnabled,t.settings.popupSuggestEngine=e.popupSuggestEngine,t.settings.popupHistoryEnabled=e.popupHistoryEnabled,t.settings.popupHistoryDays=e.popupHistoryDays,t.llmConfig.enableSummarize=e.llmEnableSummarize||!1,t.llmConfig.llmModels=e.llmModels||"[]",t.llmConfig.prompt=e.llmPrompt||"",t.llmConfig.systemPrompt=e.llmSystemPrompt||"";let n=Array.isArray(e.llmChatMenus)?e.llmChatMenus:[];t.llmChatMenus=n.map(((e,t)=>({id:"undefined"!==typeof e.id?e.id:t+1,name:e.name||"",prompt:e.prompt||"",systemPrompt:e.systemPrompt||""}))),console.log("[options] loaded engines:",t.engines),console.log("[options] loaded settings:",t.settings)})),!0}))},onDragEnd(e){console.log(this.engines,"form.engines"),this.engines.forEach(((e,t)=>{e.id=t+1}))},changeSearchUrl(e){if(!e.icon){let t=/(https?\:\/\/[^\/]+).*\?.*/,l=t.exec(e.url);l&&(e.icon=l[1].trim()+"/favicon.ico")}},addItem(){this.engines.push({id:this.engines.length+1})},delItem(e){this.engines=this.engines.filter((t=>{if(t.id!=e)return t}))},async fetchIconData(e){if(!e||e.startsWith("data:"))return e;try{const t=await fetch(e,{mode:"cors"}),l=await t.blob();return await new Promise(((e,t)=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=t,o.readAsDataURL(l)}))}catch(t){return e}},async onSubmit(){let e=this,t=0;this.engines=this.engines.filter((e=>(t++,e.id=t,e)));let l={};const o=await new Promise((e=>{chrome.storage.local.get(null,e)}));for(let a of this.engines){let e=a.name?"iconData_"+a.name:null,t=!1;e&&o[e]&&(a.iconData=o[e],t=!0),t||!a.icon||a.icon.startsWith("data:")?!t&&a.icon&&a.icon.startsWith("data:")&&(a.iconData=a.icon):a.iconData=await this.fetchIconData(a.icon),a.iconData&&(l[e]=a.iconData)}Object.keys(l).length>0&&chrome.storage.local.set(l,(function(){console.log("[options] chrome.storage.local.set iconData:",l)}));const n=this.engines.map((({iconData:e,...t})=>t)),s={engines:JSON.stringify(n),select2clipboard:this.settings.select2clipboard,showTooltip:this.settings.showTooltip,showTopSearchSwitch:this.settings.showTopSearchSwitch,searchInNewTab:this.settings.searchInNewTab,themeColor:this.settings.themeColor,textColor:this.settings.textColor,popupSuggestEnabled:this.settings.popupSuggestEnabled,popupSuggestEngine:this.settings.popupSuggestEngine,popupHistoryEnabled:this.settings.popupHistoryEnabled,popupHistoryDays:this.settings.popupHistoryDays,llmEnableSummarize:this.llmConfig.enableSummarize,llmModels:this.llmConfig.llmModels,llmPrompt:this.llmConfig.prompt,llmSystemPrompt:this.llmConfig.systemPrompt,llmChatMenus:this.llmChatMenus.map((e=>({id:e.id,name:e.name,prompt:e.prompt,systemPrompt:e.systemPrompt})))};console.log("[options] onSubmit saveObj:",s),chrome.runtime.sendMessage({action:"updateMenus",enginesMeta:n,llmChatMenus:this.llmChatMenus},(function(e){console.log("[options] runtime.sendMessage response:",e)})),chrome.storage.sync.set(s,(function(){return console.log("[options] chrome.storage.sync.set success",s),e.$message({message:e.getMessage("saved")+". "+e.getMessage("refresh"),type:"success"}),!0}))},exportConfig(){chrome.storage.local.get(null,(e=>{const t=this.engines.map((t=>{let l=t.name?e["iconData_"+t.name]:void 0;return{...t,iconData:l}})),l={engines:t,settings:this.settings,llmConfig:this.llmConfig,llmChatMenus:this.llmChatMenus.map((e=>({id:e.id,name:e.name,prompt:e.prompt,systemPrompt:e.systemPrompt})))},o=JSON.stringify(l,null,2),n=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download="search_tool_config.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}))},importConfig(e){const t=new FileReader;return t.onload=e=>{try{const t=JSON.parse(e.target.result);if(console.log("[options] importConfig loaded data:",t),t.engines&&t.settings){this.engines=t.engines,this.settings=Object.assign(this.settings,t.settings),this.settings.textColor||(this.settings.textColor="#202124"),t.llmConfig&&("string"===typeof t.llmConfig.llmModels?this.llmConfig.llmModels=t.llmConfig.llmModels:Array.isArray(t.llmConfig.llmModels)?this.llmConfig.llmModels=JSON.stringify(t.llmConfig.llmModels,null,2):this.llmConfig.llmModels="",this.llmConfig.enableSummarize=!!t.llmConfig.enableSummarize,this.llmConfig.prompt=t.llmConfig.prompt||"",this.llmConfig.systemPrompt=t.llmConfig.systemPrompt||""),Array.isArray(t.llmChatMenus)&&(this.llmChatMenus=t.llmChatMenus.map(((e,t)=>({id:"undefined"!==typeof e.id?e.id:t+1,name:e.name||"",prompt:e.prompt||"",systemPrompt:e.systemPrompt||""}))));let e={};this.engines.forEach((t=>{t.iconData&&t.name&&(e["iconData_"+t.name]=t.iconData)})),chrome.storage.local.set(e,(function(){console.log("[options] importConfig set iconData to local:",e)})),this.onSubmit(),this.$message.success(this.getMessage("importSuccess")||"导入成功")}else this.$message.error(this.getMessage("importInvalid")||"无效的配置文件")}catch(t){console.error("[options] importConfig parse error:",t),this.$message.error(this.getMessage("importInvalid")||"无效的配置文件")}},t.readAsText(e),!1},addChatMenu(){this.llmChatMenus.push({id:this.llmChatMenus.length>0?Math.max(...this.llmChatMenus.map((e=>e.id)))+1:1,name:"",prompt:"",systemPrompt:""})},delChatMenu(e){this.llmChatMenus=this.llmChatMenus.filter((t=>t.id!==e))},reset(){let e=this;this.$confirm(e.getMessage("reset")+"?",e.getMessage("confirmTitle")||"Confirm",{confirmButtonText:e.getMessage("confirmYes")||"Yes",cancelButtonText:e.getMessage("confirmNo")||"No",type:"warning"}).then((()=>{chrome.storage.local.clear((function(e){console.log("local storage cleared",e)})),chrome.storage.sync.clear((function(t){return console.log("[options] chrome.storage.sync.clear done",t),e.$message({message:e.getMessage("reseted"),type:"success"}),!0})),location.reload()})).catch((()=>{}))},getMessage(e){return chrome.i18n.getMessage(e)||""},autosave:_((function(e,t){JSON.stringify(e)!=JSON.stringify(t)&&(this.onSubmit(),this.openHiTip||(this.openHiTip=!0))}),1e3)},created(){this.init()},computed:{newForm(){return JSON.parse(JSON.stringify([this.engines,this.settings,this.llmConfig,this.llmChatMenus]))}},watch:{newForm:{handler(e,t){this.isWatch?this.autosave(e,t):this.isWatch=!0},deep:!0}},mounted(){}}),S=l(6262);const w=(0,S.A)(v,[["render",k],["__scopeId","data-v-78897640"]]);var x=w;const V=(0,o.Ef)(x);V.use(n.A),V.mount("#app")}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,l),s.exports}l.m=e,function(){var e=[];l.O=function(t,o,n,s){if(!o){var a=1/0;for(m=0;m<e.length;m++){o=e[m][0],n=e[m][1],s=e[m][2];for(var i=!0,r=0;r<o.length;r++)(!1&s||a>=s)&&Object.keys(l.O).every((function(e){return l.O[e](o[r])}))?o.splice(r--,1):(i=!1,s<a&&(a=s));if(i){e.splice(m--,1);var p=n();void 0!==p&&(t=p)}}return t}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[o,n,s]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.j=575}(),function(){var e={575:0};l.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,s,a=o[0],i=o[1],r=o[2],p=0;if(a.some((function(t){return 0!==e[t]}))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(r)var m=r(l)}for(t&&t(o);p<a.length;p++)s=a[p],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(m)},o=self["webpackChunksearch_tool"]=self["webpackChunksearch_tool"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=l.O(void 0,[504],(function(){return l(6053)}));o=l.O(o)})();