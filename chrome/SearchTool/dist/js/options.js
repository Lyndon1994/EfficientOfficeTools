(function(){"use strict";var e={6620:function(e,t,o){var n=o(3751),s=o(7975),a=(o(4188),o(641)),l=o(33);const i=["src"],r={style:{"margin-left":"8px"}},c={style:{"margin-left":"8px"}};function g(e,t,o,n,s,g){const p=(0,a.g2)("Rank"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("el-col"),h=(0,a.g2)("el-input"),m=(0,a.g2)("el-switch"),f=(0,a.g2)("el-tooltip"),b=(0,a.g2)("el-row"),y=(0,a.g2)("Delete"),k=(0,a.g2)("el-button"),F=(0,a.g2)("Plus"),w=(0,a.g2)("el-form-item"),_=(0,a.g2)("draggable"),v=(0,a.g2)("el-option"),S=(0,a.g2)("el-select"),x=(0,a.g2)("el-input-number"),T=(0,a.g2)("el-color-picker"),V=(0,a.g2)("el-upload"),M=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.Wv)(M,{ref:"form","label-width":"10px",size:"mini",style:{width:"100%","min-width":"1000px","min-height":"500px"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{list:e.engines,"onUpdate:list":t[0]||(t[0]=t=>e.engines=t),onEnd:e.onDragEnd,handle:".handle","item-key":"id",class:"list-group"},{item:(0,a.k6)((({element:t})=>[((0,a.uX)(),(0,a.Wv)(w,{label:"",key:t.id,gutter:12,class:"engine-form-item"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{gutter:10,class:"engine-row"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{xs:2,sm:1},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"handle"},{default:(0,a.k6)((()=>[(0,a.bF)(p)])),_:1})])),_:1}),(0,a.bF)(d,{xs:12,sm:6,md:3},{default:(0,a.k6)((()=>[(0,a.bF)(h,{placeholder:e.getMessage("searchEngine"),modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,class:"engine-input"},null,8,["placeholder","modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.bF)(d,{xs:12,sm:6,md:4},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("optionsInPopupTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:t.inPopup,"onUpdate:modelValue":e=>t.inPopup=e,"active-text":e.getMessage("optionsInPopup")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024),(0,a.bF)(d,{xs:12,sm:6,md:4},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("inRightTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:t.inRight,"onUpdate:modelValue":e=>t.inRight=e,"active-text":e.getMessage("inRight")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024),(0,a.bF)(d,{xs:12,sm:6,md:4},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("inShortcutsTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:t.inShortcuts,"onUpdate:modelValue":e=>t.inShortcuts=e,"active-text":e.getMessage("inShortcuts")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024),(0,a.bF)(d,{xs:12,sm:6,md:4},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("inTooltipTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:t.inTooltip,"onUpdate:modelValue":e=>t.inTooltip=e,"active-text":e.getMessage("inTooltip")},null,8,["modelValue","onUpdate:modelValue","active-text"])])),_:2},1032,["content"])])),_:2},1024)])),_:2},1024),(0,a.bF)(b,{gutter:16,class:"engine-row"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{xs:24,sm:12,md:14},{default:(0,a.k6)((()=>[(0,a.bF)(h,{placeholder:e.getMessage("searchUrl"),modelValue:t.url,"onUpdate:modelValue":e=>t.url=e,onInput:o=>e.changeSearchUrl(t),class:"engine-url"},null,8,["placeholder","modelValue","onUpdate:modelValue","onInput"])])),_:2},1024),(0,a.bF)(d,{xs:24,sm:8,md:8},{default:(0,a.k6)((()=>[(0,a.bF)(h,{placeholder:e.getMessage("searchIcon"),modelValue:t.icon,"onUpdate:modelValue":e=>t.icon=e,class:"engine-icon"},{append:(0,a.k6)((()=>[(0,a.Lk)("img",{src:t.icon,alt:"",height:"20px"},null,8,i)])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.bF)(d,{xs:6,sm:2,md:2,style:{"min-width":"40px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"danger",onClick:o=>e.delItem(t.id),circle:"",style:{"margin-left":"4px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.bF)(y)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),t.id==e.engines.length?((0,a.uX)(),(0,a.Wv)(d,{key:0,xs:6,sm:2,md:2,style:{"min-width":"40px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"info",onClick:e.addItem,circle:"",style:{"margin-left":"4px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.bF)(F)])),_:1})])),_:1},8,["onClick"])])),_:1})):(0,a.Q3)("",!0)])),_:2},1024)])),_:2},1024))])),_:1},8,["list","onEnd"]),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("select2clipboardTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:e.settings.select2clipboard,"onUpdate:modelValue":t[1]||(t[1]=t=>e.settings.select2clipboard=t),"active-text":e.getMessage("select2clipboard")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("showTooltipTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:e.settings.showTooltip,"onUpdate:modelValue":t[2]||(t[2]=t=>e.settings.showTooltip=t),"active-text":e.getMessage("showTooltip")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("showTopSearchSwitchTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:e.settings.showTopSearchSwitch,"onUpdate:modelValue":t[3]||(t[3]=t=>e.settings.showTopSearchSwitch=t),"active-text":e.getMessage("showTopSearchSwitch")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("searchInNewTabTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:e.settings.searchInNewTab,"onUpdate:modelValue":t[4]||(t[4]=t=>e.settings.searchInNewTab=t),"active-text":e.getMessage("searchInNewTab")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("popupSuggestEnabledTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:e.settings.popupSuggestEnabled,"onUpdate:modelValue":t[5]||(t[5]=t=>e.settings.popupSuggestEnabled=t),"active-text":e.getMessage("popupSuggestEnabled")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("popupSuggestEngineTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(S,{modelValue:e.settings.popupSuggestEngine,"onUpdate:modelValue":t[6]||(t[6]=t=>e.settings.popupSuggestEngine=t),style:{width:"120px"}},{default:(0,a.k6)((()=>[(0,a.bF)(v,{label:"Bing",value:"bing"}),(0,a.bF)(v,{label:"Google",value:"google"})])),_:1},8,["modelValue"]),(0,a.Lk)("span",r,(0,l.v_)(e.getMessage("popupSuggestEngine")),1)])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("popupHistoryEnabledTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:e.settings.popupHistoryEnabled,"onUpdate:modelValue":t[7]||(t[7]=t=>e.settings.popupHistoryEnabled=t),"active-text":e.getMessage("popupHistoryEnabled")},null,8,["modelValue","active-text"])])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"item",effect:"dark",content:e.getMessage("popupHistoryDaysTip"),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{modelValue:e.settings.popupHistoryDays,"onUpdate:modelValue":t[8]||(t[8]=t=>e.settings.popupHistoryDays=t),min:1,max:365,step:1,style:{width:"120px"}},null,8,["modelValue"]),(0,a.Lk)("span",c,(0,l.v_)(e.getMessage("popupHistoryDays")),1)])),_:1},8,["content"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.getMessage("themeColorTip"))+": ",1),(0,a.bF)(T,{modelValue:e.settings.themeColor,"onUpdate:modelValue":t[9]||(t[9]=t=>e.settings.themeColor=t),"show-alpha":"",predefine:e.predefineColors},null,8,["modelValue","predefine"])])),_:1}),(0,a.bF)(w,{label:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.getMessage("textColorTip"))+": ",1),(0,a.bF)(T,{modelValue:e.settings.textColor,"onUpdate:modelValue":t[10]||(t[10]=t=>e.settings.textColor=t),"show-alpha":"",predefine:e.predefineColors},null,8,["modelValue","predefine"])])),_:1}),(0,a.bF)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"danger",onClick:e.reset},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.getMessage("reset")),1)])),_:1},8,["onClick"]),(0,a.bF)(k,{type:"default",onClick:e.exportConfig},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.getMessage("export")||"导出"),1)])),_:1},8,["onClick"]),(0,a.bF)(V,{"show-file-list":!1,accept:".json","before-upload":e.importConfig},{default:(0,a.k6)((()=>[(0,a.bF)(k,{type:"default"},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.getMessage("import")||"导入"),1)])),_:1})])),_:1},8,["before-upload"])])),_:1})])),_:1},512)}o(4114),o(8111),o(2489),o(7588),o(1701);var p=o(432),u=o.n(p),d=o(8548),h=o(181),m=(0,a.pM)({name:"App",components:{draggable:u(),Delete:d.epd,Plus:d.FWt,Rank:d.rgM},data(){return{openHiTip:!1,logmsg:"",engines:[],settings:{select2clipboard:!1,showTooltip:!1,showTopSearchSwitch:!0,searchInNewTab:!0,themeColor:"rgba(144, 238, 144, 0.56)",textColor:"#202124",popupSuggestEnabled:!0,popupSuggestEngine:"bing",popupHistoryEnabled:!0,popupHistoryDays:90},predefineColors:["#FFFFFF","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"]}},methods:{init(){let e={engines:this.getMessage("defaultEnginesConfig"),select2clipboard:!1,showTooltip:!1,showTopSearchSwitch:!0,searchInNewTab:!0,themeColor:"rgba(144, 238, 144, 0.56)",textColor:"#202124",popupSuggestEnabled:!0,popupSuggestEngine:"bing",popupHistoryEnabled:!0,popupHistoryDays:90},t=this;console.log("[options] init defaultConfig:",e),chrome.storage.sync.get(e,(function(e){console.log("[options] chrome.storage.sync.get result:",e);let o=JSON.parse(e.engines);return chrome.storage.local.get(null,(function(n){o.forEach((e=>{n&&n["iconData_"+e.id]&&(e.iconData=n["iconData_"+e.id])})),t.engines=o,t.settings.select2clipboard=e.select2clipboard,t.settings.showTooltip=e.showTooltip,t.settings.showTopSearchSwitch=e.showTopSearchSwitch,t.settings.searchInNewTab=e.searchInNewTab,t.settings.themeColor=e.themeColor,t.settings.textColor=e.textColor,t.settings.popupSuggestEnabled=e.popupSuggestEnabled,t.settings.popupSuggestEngine=e.popupSuggestEngine,t.settings.popupHistoryEnabled=e.popupHistoryEnabled,t.settings.popupHistoryDays=e.popupHistoryDays,console.log("[options] loaded engines:",t.engines),console.log("[options] loaded settings:",t.settings)})),!0})),this.openReadme()},onDragEnd(e){console.log(this.engines,"form.engines"),this.engines.forEach(((e,t)=>{e.id=t+1}))},changeSearchUrl(e){if(!e.icon){let t=/(https?\:\/\/[^\/]+).*\?.*/,o=t.exec(e.url);o&&(e.icon=o[1].trim()+"/favicon.ico")}},addItem(){this.engines.push({id:this.engines.length+1})},delItem(e){this.engines=this.engines.filter((t=>{if(t.id!=e)return t}))},async fetchIconData(e){if(!e||e.startsWith("data:"))return e;try{const t=await fetch(e,{mode:"cors"}),o=await t.blob();return await new Promise(((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(o)}))}catch(t){return e}},async onSubmit(){let e=this,t=0;this.engines=this.engines.filter((e=>(t++,e.id=t,e)));let o={};for(let a of this.engines)a.icon&&!a.icon.startsWith("data:")?a.iconData=await this.fetchIconData(a.icon):a.icon&&a.icon.startsWith("data:")&&(a.iconData=a.icon),a.iconData&&(o["iconData_"+a.id]=a.iconData);chrome.storage.local.set(o,(function(){console.log("[options] chrome.storage.local.set iconData:",o)}));const n=this.engines.map((({iconData:e,...t})=>t)),s={engines:JSON.stringify(n),select2clipboard:this.settings.select2clipboard,showTooltip:this.settings.showTooltip,showTopSearchSwitch:this.settings.showTopSearchSwitch,searchInNewTab:this.settings.searchInNewTab,themeColor:this.settings.themeColor,textColor:this.settings.textColor,popupSuggestEnabled:this.settings.popupSuggestEnabled,popupSuggestEngine:this.settings.popupSuggestEngine,popupHistoryEnabled:this.settings.popupHistoryEnabled,popupHistoryDays:this.settings.popupHistoryDays};console.log("[options] onSubmit saveObj:",s),chrome.runtime.sendMessage(n,(function(e){console.log("[options] runtime.sendMessage response:",e)})),chrome.storage.sync.set(s,(function(){return console.log("[options] chrome.storage.sync.set success",s),e.$message({message:e.getMessage("saved")+". "+e.getMessage("refresh"),type:"success"}),chrome.storage.sync.get(null,(function(e){console.log("[options] chrome.storage.sync.get after set:",e)})),!0}))},exportConfig(){chrome.storage.local.get(null,(e=>{const t=this.engines.map((t=>{let o=e["iconData_"+t.id];return{...t,iconData:o}})),o={engines:t,settings:this.settings},n=JSON.stringify(o,null,2),s=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="search_tool_config.json",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}))},importConfig(e){const t=new FileReader;return t.onload=e=>{try{const t=JSON.parse(e.target.result);if(console.log("[options] importConfig loaded data:",t),t.engines&&t.settings){this.engines=t.engines,this.settings=Object.assign(this.settings,t.settings),this.settings.textColor||(this.settings.textColor="#202124");let e={};this.engines.forEach((t=>{t.iconData&&(e["iconData_"+t.id]=t.iconData)})),chrome.storage.local.set(e,(function(){console.log("[options] importConfig set iconData to local:",e)})),this.onSubmit(),this.$message.success(this.getMessage("importSuccess")||"导入成功")}else this.$message.error(this.getMessage("importInvalid")||"无效的配置文件")}catch(t){console.error("[options] importConfig parse error:",t),this.$message.error(this.getMessage("importInvalid")||"无效的配置文件")}},t.readAsText(e),!1},reset(){let e=this;this.$confirm(e.getMessage("reset")+"?","Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((()=>{chrome.storage.sync.clear((function(t){return console.log("[options] chrome.storage.sync.clear done",t),e.$message({message:e.getMessage("reseted"),type:"success"}),chrome.storage.sync.get(null,(function(e){console.log("[options] chrome.storage.sync.get after clear:",e)})),!0})),location.reload()})).catch((()=>{}))},getMessage(e){return chrome.i18n.getMessage(e)},autosave:h((function(e,t){JSON.stringify(e)!=JSON.stringify(t)&&(this.onSubmit(),this.openHiTip||(this.openHi(),this.openHiTip=!0))}),1e3),openHi(){this.$notify({title:"Hi",dangerouslyUseHTMLString:!0,message:this.getMessage("comment"),duration:0})},openReadme(){this.$notify({title:"Read Me",dangerouslyUseHTMLString:!0,message:this.getMessage("readme"),duration:0});let e=this;setTimeout((function(){e.$notify({title:"Welcome to contribute",dangerouslyUseHTMLString:!0,message:"You are more than welcome to contribute code to improve the tool. <a href='https://github.com/Lyndon1994/EfficientOfficeTools/tree/main/chrome/SearchTool'>Click here.</a> 😊",duration:0})}),3e3)}},created(){this.init()},computed:{newForm(){return JSON.parse(JSON.stringify([this.engines,this.settings]))}},watch:{newForm:{handler(e,t){this.isWatch?this.autosave(e,t):this.isWatch=!0},deep:!0}},mounted(){}}),f=o(6262);const b=(0,f.A)(m,[["render",g],["__scopeId","data-v-f42c990e"]]);var y=b;const k=(0,n.Ef)(y);k.use(s.A),k.mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,a){if(!n){var l=1/0;for(g=0;g<e.length;g++){n=e[g][0],s=e[g][1],a=e[g][2];for(var i=!0,r=0;r<n.length;r++)(!1&a||l>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[r])}))?n.splice(r--,1):(i=!1,a<l&&(l=a));if(i){e.splice(g--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var g=e.length;g>0&&e[g-1][2]>a;g--)e[g]=e[g-1];e[g]=[n,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.j=575}(),function(){var e={575:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,l=n[0],i=n[1],r=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(r)var g=r(o)}for(t&&t(n);c<l.length;c++)a=l[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(g)},n=self["webpackChunksearch_tool"]=self["webpackChunksearch_tool"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(6620)}));n=o.O(n)})();